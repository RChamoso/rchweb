define(function(){var e,t,n=showing=!1;return{init:function(){var t,n,r,i,s;if(n)return;gs=google.search,e=(new Element("div",{id:"searchResults"})).inject($("searchForm")),t=this,this.closeLink=(new Element("a",{href:"javascript:;","class":"close",text:"Close",events:{click:t.hide}})).inject(e),n=this.resultsContainer=(new Element("div")).inject(e),r=new gs.WebSearch,i=new gs.DrawOptions,s=this.control=new gs.SearchControl,i.setDrawMode(gs.SearchControl.DRAW_MODE_TABBED),i.setInput(this.input),r.setUserDefinedClassSuffix("siteSearch"),r.setSiteRestriction("davidwalsh.name"),r.setLinkTarget(gs.Search.LINK_TARGET_SELF),s.addSearcher(r),s.draw(n,i),s.setNoResultsString("No results were found.")},search:function(){var e;n||(this.init(),n=!0),e=this.input.value.toLowerCase().trim();if(e==t&&e!="")return;e==""&&this.hide(),this.show(),this.control.execute(e),t=e},hide:function(){e.removeClass("show")},show:function(){e.addClass("show")}}});